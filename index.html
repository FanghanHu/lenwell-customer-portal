<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
        integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
</head>

<body>
    <div class="container">
        <form action="https://lenwellpro.repairshopr.com/api/v1/leads" method="POST">
            <input type="text" hidden value="T553220648bbfc92e4-db9eda93b74f45e673d56342afc76c3d">
        </form>
    </div>

    <h3 onclick="showStep($deviceType)">Device: <span class="text-muted" id="device-output"></span></h3>
    <div id="device-type" class="collapse show">
        <div class="d-flex flex-wrap">
            <div class="card m-1 btn p-0" data-type="iphone">
                <div class="card-img-top">
                    <img src="https://lenwellscreen.com/wp-content/uploads/2021/07/iPhone.png" width="300px" height="300px" alt="iPhone">
                </div>
                <div class="card-body">
                    <h5 class="card-title">
                        iPhone
                    </h5>
                </div>
            </div>
            <div class="card m-1 btn p-0" data-type="ipad">
                <div class="card-img-top">
                    <img src="https://lenwellscreen.com/wp-content/uploads/2021/07/iPad.png" width="300px" height="300px" alt="iPad">
                </div>
                <div class="card-body">
                    <h5 class="card-title">
                        iPad
                    </h5>
                </div>
            </div>
            <div class="card m-1 btn p-0" data-type="iwatch">
                <div class="card-img-top">
                    <img src="https://lenwellscreen.com/wp-content/uploads/2021/07/iWatch.png" width="300px" height="300px" alt="Apple Watch">
                </div>
                <div class="card-body">
                    <h5 class="card-title">
                        Apple Watch
                    </h5>
                </div>
            </div>
            <div class="card m-1 btn p-0" data-type="samsungPhone">
                <div class="card-img-top">
                    <img src="https://lenwellscreen.com/wp-content/uploads/2021/07/Samsung-Phone.png" width="300px" height="300px" alt="Samsung Cell Phone">
                </div>
                <div class="card-body">
                    <h5 class="card-title">
                        Samsung Cell Phone
                    </h5>
                </div>
            </div>
            <div class="card m-1 btn p-0" data-type="samsungTablet">
                <div class="card-img-top">
                    <img src="https://lenwellscreen.com/wp-content/uploads/2021/07/Samsung-Tablet.png" width="300px" height="300px" alt="Samsung Tablet">
                </div>
                <div class="card-body">
                    <h5 class="card-title">
                        Samsung Tablet
                    </h5>
                </div>
            </div>
            <div class="card m-1 btn p-0">
                <div class="card-img-top">
                    <svg xmlns="http://www.w3.org/2000/svg" width="300px" height="300px" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </div>
                <div class="card-body">
                    <h5 class="card-title">
                        Other
                    </h5>
                </div>
            </div>
        </div>
    </div>
    <h3 onclick="showStep($model)">Model: <span class="text-muted" id="model-output"></span></h3>
    <div id="model" class="collapse">
        <div id="model-list" class="d-flex flex-wrap">
            <div class="text-muted"> Please choose your device type first.</div>
        </div>
    </div>
    <h3 onclick="showStep($color)">Color: <span class="text-muted" id="color-output"></span></h3>
    <div id="color" class="collapse">
        <div id="colors" class="d-flex flex-wrap"></div>
    </div>
    <h3 onclick="showStep($service)">Service: <span class="text-muted" id="service-output"></span></h3>
    <div id="service" class="collapse">
        <h5 class="text-muted">If the service or combo you need is not in this list, please choose "Other" and write your needs in the description.</h5>
        <div id="services" class="d-flex flex-wrap">
        </div>
    </div>
    <h3 onclick="showStep($description)">Description: <span class="text-muted" id="description-output"></span></h3>
    <div id="description" class="collapse">
        <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text">Description</span>
            </div>
            <textarea onchange="description=this.value; $('#description-output').text(this.value.length<20?this.value:this.value.substring(0,20) +'...'); showStep($contact);" class="form-control" aria-label="With textarea"></textarea>
            <button class="btn btn-lg btn-primary input-group-append" onclick="showStep($contact)">Next</button>
          </div>
          
    </div>
    <h3 onclick="showStep($contact)">Contact: <span class="text-muted" id="contact-output"></span></h3>
    <div id="contact" class="collapse">
        <h5 class="text-muted">Please make sure your contact information is correct</h5>
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <span class="input-group-text">First Name</span>
            </div>
            <input onChange="firstName=this.value; showContact()" type="text" class="form-control" placeholder="first name" aria-label="model">
        </div>
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <span class="input-group-text">Last Name</span>
            </div>
            <input onChange="lastName=this.value; showContact()" type="text" class="form-control" placeholder="last name" aria-label="model">
        </div>
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <span class="input-group-text">Company</span>
            </div>
            <input onChange="company=this.value; showContact()" type="text" class="form-control" placeholder="company" aria-label="model">
        </div>
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <span class="input-group-text">Phone Number</span>
            </div>
            <input onChange="phone=this.value; showContact()" type="text" class="form-control" placeholder="(123) 456-7890" aria-label="model">
        </div>
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <span class="input-group-text">Email</span>
            </div>
            <input onChange="email=this.value; showContact()" type="text" class="form-control" placeholder="name@mail.com" aria-label="model">
        </div>
        <button class="btn btn-lg btn-success" onclick="submitLead()">Submit</button>
    </div>
    <div id="thanks" class="collapse">
        <h3 class="text-success">Order has been submitted, your reference number is: <span id="ref-number" class="text-warnning">#######</span>, Thank you for your business!</h3>
        <h4 class="text-success mt-5">So, What's next?</h3>
        <p class="text-muted">
            Bring your device to our store and give us your reference number, or mail it to us with the reference number written on a piece of paper. 
            If you provided your phone number, you will get updates as we receive your item, repair it, and send it back.
        </p>
    </div>




    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"
        integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF"
        crossorigin="anonymous"></script>


    <script>
        const models = {
            iphone: [
                ["6", "iPhone 6"],
                ["6+", "iPhone 6+"],
                ["6S", "iPhone 6S"],
                ["6S+","iPhone 6S+"],
                ["7","iPhone 7"],
                ["7+","iPhone 7+"],
                ["8","iPhone 8"],
                ["8+","iPhone 8+"],
                ["X","iPhone X"],
                ["XS","iPhone XS"],
                ["XR","iPhone XR"],
                ["XS MAX","iPhone XS MAX"],
                ["11","iPhone 11"],
                ["11 PRO","iPhone 11 PRO"],
                ["11 PRO MAX","iPhone 11 PRO MAX"],
                ["12","iPhone 12"],
                ["12 MINI","iPhone 12 MINI"],
                ["12 PRO","iPhone 12 PRO"],
                ["12 PRO MAX","iPhone 12 PRO MAX"],
            ],
            ipad: [
                ["1 (A1219 A1337)","iPad 1"],
                ["2 (A1395 A1396 A1397)","iPad 2"],
                ["3 (A1403 A1416 A1430)","iPad 3"],
                ["4 (A1458 A1459 A1460)","iPad 4"],
                ["5 (A1822 A1823)","iPad 5"],
                ["6 (A1893 A1954)","iPad 6"],
                ["7 (A2197 A2198 A2200)","iPad 7"],
                ["8 (A2270 A2428 A2429 A2430)","iPad 8"],
                ["Mini (A1432 A1454 A1455)","iPad MINI"],
                ["Mini2 (A1489 A1490 A1491)","iPad MINI 2"],
                ["Mini3 (A1599 A1600)","iPad MINI 3"],
                ["Mini4 (A1538 A1550)","iPad MINI 4"],
                ["Mini5 (A2124 A2126 A2133)","iPad MINI 5"],
                ["Pro12.9-4 (A2069 A2229 A2232)","iPad Pro12.9-4"],
                ["Pro12.9-3 (A1876 A1895 A2014)","iPad Pro12.9-3"],
                ["Pro12.9-2 (A1670 A1671)","iPad Pro12.9-2"],
                ["Pro12.9-1 (A1584 A1652)","iPad Pro12.9-1"],
                ["Pro11-2 (A2068 A2228 A2230)","iPad Pro11-2"],
                ["Pro11-1 (A1934 A1980 A2013)","iPad Pro11-1"],
                ["Pro10.5 (A1701 A1709)","iPad Pro10.5"],
                ["Pro9.7 (A1673 A1674 A1675)","iPad Pro9.7"],
                ["Air4 (A2072 A2316 A2324 A2325)","iPad Air4"],
                ["Air3 (A2123 A2152 A2153)","iPad Air3"],
                ["Air2 (A1566 A1567)","iPad Air2"],
                ["Air1 (A1474 A1475 A1476)","iPad Air1"],
            ],
            iwatch: [
                ["1 38mm","iWatch 1 38mm"],
                ["1 42mm","iWatch 1 42mm"],
                ["2 GPS 38mm","iWatch 2 G 38mm"],
                ["2 GPS 42mm","iWatch 2 G 42mm"],
                ["2 GPS+Cellular 38mm","iWatch 2 GC 38mm"],
                ["2 GPS+Cellular 42mm","iWatch 2 GC 42mm"],
                ["3 GPS 38mm","iWatch 3 G 38mm"],
                ["3 GPS 42mm","iWatch 3 G 42mm"],
                ["3 GPS+Cellular 38mm","iWatch 3 GC 38mm"],
                ["3 GPS+Cellular 42mm","iWatch 3 GC 42mm"],
                ["4 40mm","iWatch 4 40mm"],
                ["4 44mm","iWatch 4 44mm"],
                ["5 40mm","iWatch 5 40mm"],
                ["5 44mm","iWatch 5 44mm"],
                ["6 40mm","iWatch 6 40mm"],
                ["6 44mm","iWatch 6 44mm"],
                ["SE 40mm","iWatch SE 40mm"],
                ["SE 44mm","iWatch SE 44mm"],
            ],
            samsungPhone: [
                ["S21 5G","Samsung S21 5G"],
                ["S21 Ultra","Samsung S21 Ultra"],
                ["S21 Plus","Samsung S21 Plus"],
                ["Note 20 Ultra","Samsung Note 20 Ultra"],
                ["Note 20","Samsung Note 20"],
                ["Note 10+","Samsung Note 10+"],
                ["Note 10","Samsung Note 10"],
                ["Note 9","Samsung Note9"],
                ["Note 8","Samsung Note 8"],
                ["Note 7","Samsung Note 7"],
                ["Note 6","Samsung Note 6"],
                ["Note 5","Samsung Note 5"],
                ["Note 4","Samsung Note 4"],
                ["Note 3","Samsung Note 3"],
                ["S20 FE","Samsung S20 FE"],
                ["S20 Ultra","Samsung S20 Ultra"],
                ["S20+","Samsung S20+"],
                ["S20 5G","Samsung S20 5G"],
                ["S10+","Samsung S10+"],
                ["S10 5G","Samsung S10 5G"],
                ["S10e","Samsung S10e"],
                ["S10","Samsung S10"],
                ["S9+","Samsung S9+"],
                ["S9","Samsung S9"],
                ["S8 Active","Samsung S8 Active"],
                ["S8+","Samsung S8+"],
                ["S8","Samsung S8"],
                ["S7 Active","Samsung S7 Active"],
                ["S7 Edge","Samsung S7 Edge"],
                ["S7","Samsung S7"],
                ["S6e","Samsung S6e"],
                ["S6","Samsung S6"],
                ["S5","Samsung S5"],
                ["S4","Samsung S4"],
                ["S3","Samsung S3"],
            ],
            samsungTablet: [
                ["Tab A 10.1 (T510)","Samsung Tab A 10.1"],
                ["Tab S7+ 12.4 (T970)","Samsung Tab S7+"],
                ["Tab S7 11 (T870)","Samsung Tab S7"],
                ["Tab S6 10.5 (T860)","Samsung Tab S6 10.5"],
                ["Tab S5e 10.5 (T720)","Samsung Tab S5e 10.5"],
                ["Tab S4 10.5 (T830)","Samsung Tab S4 10.5"],
                ["Tab Pro 10.1 (T520)","Samsung Tab Pro 10.1"],
                ["Tab A 10.5 (T590)","Samsung Tab A 10.5"],
                ["Tab A 8.0 (T295)","Samsung Tab A 8.0"],
                ["Tab A 8.0 (T290)","Samsung Tab A 8.0"],
                ["Other","Samsung Other Tablet"],
            ]
        };

        const colors = [
            "white",
            "silver",
            "gray",
            "black",
            "red",
            "green",
            "blue",
            "rose gold",
            "pink",
            "gold",
            "yellow",
            "bronze",
            "other"
        ]

        const services = [
            ["Front Glass Panel", "Screen Refurbish"],
            ["Front Glass Panel + Digitizer", "Screen Refurbish + TP"],
            ["Front Glass Panel + Frame", "Screen Refurbish + Frame"],
            ["Back Cover", "Back Door"],
            ["Back Cover + Camera Lens", "Backdoor + Camera lens"],
            ["Camera Lens", "Camera Lens"],
            ["Camera Module", "Camera"],
            ["Charging Port", "Charging Port"],
            ["Front Glass Panel + Back Cover", "FB"],
            ["Front Glass Panel + Digitizer + Back Cover", "FB+TP"],
            ["Front Glass Panel + Camera Lens + Back Cover", "FB+CameraLens"],
            ["Front Glass Panel + LCD + Back Cover", "FB+LCD"],
            ["Home Button", "Home Button"],
            ["LCD", "LCD-A"],
            ["Screen Polish", "Screen Polish - Label Only"],
            ["Battery", "Battery"],
            ["Speaker", "Speaker"],
            ["Housing", "Housing"],
            ["Other - In Description", "Labor"],
        ]

        const $deviceType = $("#device-type");
        const $model = $("#model");
        const $color = $("#color");
        const $service = $("#service");
        const $description = $("#description");
        const $contact = $("#contact");
        const $thanks = $("#thanks");

        let model;
        let color;
        let service;
        let description;
        let firstName;
        let lastName;
        let company;
        let phone;
        let email;

        function showStep($section) {
            $(".collapse").collapse("hide");
            $section.collapse("show");
        }

        $deviceType.on("click", ".card", (e) => {
            //which button is pressed
            const type = $(e.target).closest(".card").data("type");
            const typeDisplay = $(e.target).closest(".card").find(".card-title").text();
            const $models = $("#model-list");

            $("#device-output").text(typeDisplay);

            //remove whatever model that's already in the list
            $models.empty();
            if(models[type]) {
                for(const modelInfo of models[type]) {
                    $models.append(
                        `
                            <button class="btn btn-lg btn-success m-1" onClick="model='${modelInfo[1]}'; $('#model-output').text('${modelInfo[0]}'); showStep($color);">${modelInfo[0]}</button>
                        `
                    );
                }
            } else {
                $models.append(
                    `
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text">Model</span>
                        </div>
                        <input onChange="model=this.value; $('#model-output').text(this.value); showStep($color)" type="text" class="form-control" placeholder="other model" aria-label="model">
                        <button class="btn btn-primary input-group-append" onclick="showStep($color)">Next</button>
                    </div>
                    `
                )
            }


            //hide last section and show the new one
            showStep($model);
        })

        for(const color of colors) {
            $("#colors").append(
                `
                    <button class="btn btn-lg btn-success m-1" onClick="color='${color}'; $('#color-output').text('${color}'); showStep($service);">${color}</button>
                `
            );
        }

        for(const serviceInfo of services) {
            $("#services").append(
                `
                    <button class="btn btn-lg btn-success m-1" onClick="service='${serviceInfo[1]}'; $('#service-output').text('${serviceInfo[0]}'); showStep($description);">${serviceInfo[0]}</button>
                `
            )
        }

        function showContact() {
            $('#contact-output').text(`${firstName??''} ${lastName??''} ${company ? " - " + company : ''} ${phone ? " - " + phone : ''} ${email ? " - " + email : ''}`);
        }

        function submitLead() {
            let validated = true;
            if(!model) {
                $model.prev("h3").addClass("text-danger");
                validated = false;
            } else {
                $model.prev("h3").removeClass("text-danger");
            }
            if(!color) {
                $color.prev("h3").addClass("text-danger");
                validated = false;
            } else {
                $color.prev("h3").removeClass("text-danger");
            }
            if(!service) {
                $service.prev("h3").addClass("text-danger");
                validated = false;
            } else {
                $service.prev("h3").removeClass("text-danger");
            }
            if(service === "Labor" && !description) {
                $description.prev("h3").addClass("text-danger");
                validated = false;
            } else {
                $description.prev("h3").removeClass("text-danger");
            }
            if(!firstName && !lastName && !company && !phone && !email) {
                $contact.prev("h3").addClass("text-danger");
                validated = false;
            } else {
                $contact.prev("h3").removeClass("text-danger");
            }

            if(validated) {
                $.post("https://lenwellpro.repairshopr.com/api/v1/leads", {
                    api_key: "T553220648bbfc92e4-db9eda93b74f45e673d56342afc76c3d",
                    business_name: company,
                    email: email,
                    first_name: firstName,
                    last_name: lastName,
                    phone: phone,
                    ticket_description: description,
                    ticket_problem_type: service,
                    ticket_subject: `${model} - ${service}`
                }, res => {
                    $("#ref-number").text(res.lead.id);
                    showStep($thanks);
                })
            }
        }

    </script>
</body>

</html>